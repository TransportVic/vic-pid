extends ../core/pid

block head
  link(rel='stylesheet' href=`${staticContent}/css/colours.css`)
  link(rel='stylesheet' href=`${staticContent}/css/metro-lcd/full-pid-base.css`)
  link(rel='stylesheet' href=`${staticContent}/css/metro-lcd/platform.css`)
  link(rel='stylesheet' href=`${staticContent}/css/metro-lcd/stopping-pattern.css`)

block scripts
  script(src=`${staticContent}/scripts/metro-lcd/platform.mjs` type='module')
  script(src=`${staticContent}/scripts/test-data.js`)
  script.
    window.onload = () => {
      let pid = new MetroLCDPlatformPID(Object.keys(search.hash)[0] || 'platform')
      window.pid = pid
      pid.updateServices(window.services)
    }

block pid
  div.pid.pid-16-9.platform.landscape.showing-departure.light
    div.line-marker.no-line
    div.next-service-info
      div.next-service-header
        div.left
          span.next-service-sch-time
          span.next-service-destination
        div.right
          span.next-service-platform
          span.next-service-est-time
      div.next-service-pattern-info
        span.next-service-summary
    div.next-service-detail
      div.next-service-pattern
      div.service-message
    div.fixed-message
    div.pid-footer
      table.subsequent-service-info
        mixin serviceRow()
          tr.subsequent-service.no-line.template
            td.service-sch-time
              span {0}
            td.service-destination
              span(disrupted="{1}") {2}
            td.service-summary
              span {3}
            td.service-platform
              span {4}
            td.service-est-time
              span {5}
        +serviceRow()
      div.next-service-message
      div.clock